name: Ultimate Clean Build
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.19.0'
      
      - name: ğŸ’£ ØªØ¯Ù…ÙŠØ± Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ¨Ù†Ø§Ø¡ Ù…Ù† Ø§Ù„ØµÙØ±
        run: |
          # Ù…Ø³Ø­ ÙƒÙ„ Ù…Ø®Ù„ÙØ§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆÙ…Ø¬Ù„Ø¯ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯
          flutter clean
          rm -rf build
          rm -rf android
          
          # Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù‡ÙˆÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© (ID Ø¬Ø¯ÙŠØ¯)
          # ØªØºÙŠÙŠØ± com.ibrahim Ù„Ù€ com.brhom.tech Ø¹Ø´Ø§Ù† Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…ÙŠØ¹ØªØ¨Ø±ÙˆØ´ ØªØ­Ø¯ÙŠØ«
          flutter create --org com.brhom.tech --project-name fastbridge_new . --overwrite
          
          # ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
          flutter pub get

      - name: ğŸ—ï¸ Ø¨Ù†Ø§Ø¡ APK Ø¬Ø¯ÙŠØ¯ ØªÙ…Ø§Ù…Ø§Ù‹
        run: flutter build apk --release

      - name: ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        run: |
          curl -F "chat_id=1857967143" \
               -F "document=@build/app/outputs/flutter-apk/app-release.apk" \
               -F "caption=ğŸ”¥ Ø§Ù„Ù…Ø±Ø© Ø¯ÙŠ Ù…ÙÙŠØ´ Ø¹Ø¯Ø§Ø¯! Ø¯Ù‡ ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯ 100%." \
               "https://api.telegram.org/bot8247992344:AAHUK1O7IqQJyeZ44TOh7v93kgWtb6yA1WU/sendDocument"
