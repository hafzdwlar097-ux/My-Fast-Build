name: Flutter Forced Clean Build
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.19.0'
      
      - name: ğŸ”¥ Deep Clean & Force Rebuild
        run: |
          # ØªÙ†Ø¸ÙŠÙ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø®Ù„ÙØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
          flutter clean
          rm -rf build
          
          # Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ù„Ø¶Ù…Ø§Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø§Ù†ÙŠÙØ³Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯
          flutter create --org com.ibrahim.new --project-name fast_bridge_app . --overwrite
          
          # ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù…Ù† Ø§Ù„ØµÙØ± (Ø¶Ø±ÙˆØ±ÙŠ Ù„ØªØºÙŠÙŠØ± Ø§Ù„ÙƒÙˆØ¯)
          flutter pub get

      - name: ğŸ—ï¸ Build Fresh APK
        run: flutter build apk --release

      - name: ğŸš€ Send Fresh APK to Telegram
        run: |
          curl -F "chat_id=1857967143" \
               -F "document=@build/app/outputs/flutter-apk/app-release.apk" \
               -F "caption=ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø© Ù†Ø¬Ø­Øª! ØªÙ… ØªØ¯Ù…ÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙˆØ¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯." \
               "https://api.telegram.org/bot8247992344:AAHUK1O7IqQJyeZ44TOh7v93kgWtb6yA1WU/sendDocument"
